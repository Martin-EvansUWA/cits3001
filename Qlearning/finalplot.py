import matplotlib
import matplotlib.pyplot as plt
import numpy as np

#time

ddqn_time_dict = { 200: 0.4373147487640381, 400: 0.8761138916015625, 600: 1.506394624710083, 800: 12.971395492553711, 1000: 18.15818500518799, 1200: 39.24370765686035, 1400: 39.55875563621521, 1600: 163.84463763237, 1800: 246.96680569648743, 2000: 247.4340672492981, 2200: 248.05865788459778, 2400: 250.0582275390625}

mcts_time_dict = {200: 43.653846979141235, 400: 89.02893209457397, 600: 180.82742190361023, 800: 278.49342679977417, 1000: 368.5176239013672, 1200: 605.2430918216705, 1400: 741.5620839595795, 1600: 917.7260229587555, 1800: 1113.151396036148, 2000: 1393.452437877655, 2200: 1744.5309858322144, 2400: 2012.3721940517426, 2600: 2285.299206972122, 2800: 2618.422122001648, 3000: 2991.2072670459747}


mcts_values = sorted(mcts_time_dict.items())
ddqn_values = sorted(ddqn_time_dict.items())

x1, y1 = zip(*mcts_values)
x2, y2 = zip(*ddqn_values)

x1 = np.array(x1)
y1 = np.array(y1)

x2 = np.array(x2)
y2 = np.array(y2)


fig, ax = plt.subplots()


ax.scatter(x1, y1, label='MCTS')
ax.scatter(x2, y2, label='DDQN', marker='s', color='r')
ax.legend()
ax.set_xlabel('Distance (x coordinate)')
ax.set_ylabel('Time taken (seconds)')


plt.title("Time taken to reach certain distances.")
plt.savefig("finalgraphs/Time taken to reach certain distances.")

plt.cla()

# plot time against alg


# steps

ddqn_steps_dict = {200: 27, 400: 105, 600: 164, 800: 563, 1000: 592, 1200: 2518, 1400: 2547, 1600: 52433, 1800: 59554, 2000: 169664, 2200: 169712, 2400: 170012}

mcts_steps_dict =  {200: 11570, 400: 23539, 600: 47593, 800: 73031, 1000: 96444, 1200: 158134, 1400: 193452, 1600: 238985, 1800: 289347, 2000: 361067, 2200: 451040, 2400: 519867, 2600: 589938, 2800: 675690, 3000: 771653}


mcts_values = sorted(mcts_steps_dict.items())
ddqn_values = sorted(ddqn_steps_dict.items())

x1, y1 = zip(*mcts_values)
x2, y2 = zip(*ddqn_values)

x1 = np.array(x1)
y1 = np.array(y1)

x2 = np.array(x2)
y2 = np.array(y2)


fig, ax = plt.subplots()


ax.scatter(x1, y1, label='MCTS')
ax.scatter(x2, y2, label='DDQN', marker='s', color='r')
ax.legend()
ax.set_xlabel('Distance (x coordinate)')
ax.set_ylabel('Number of moves taken (steps)')


plt.title("Steps taken to reach certain distances.")
plt.savefig("finalgraphs/Steps taken to reach certain distances.")

plt.cla()
# deaths

ddqn_deaths_dict = {200: 0, 400: 0, 600: 0, 800: 0, 1000: 0, 1200: 2, 1400: 2, 1600: 234, 1800: 375, 2000: 845, 2200: 845, 2400: 845, 2600: 845}

mcts_deaths_dict =  {200: 9, 400: 31, 600: 37, 800: 53, 1000: 57, 1200: 125, 1400: 185, 1600: 242, 1800: 303, 2000: 413, 2200: 413, 2400: 421, 2600: 439, 2800: 489, 3000: 489}



mcts_values = sorted(mcts_deaths_dict.items())
ddqn_values = sorted(ddqn_deaths_dict.items())

x1, y1 = zip(*mcts_values)
x2, y2 = zip(*ddqn_values)

x1 = np.array(x1)
y1 = np.array(y1)

x2 = np.array(x2)
y2 = np.array(y2)


fig, ax = plt.subplots()


ax.scatter(x1, y1, label='MCTS')
ax.scatter(x2, y2, label='DDQN', marker='s', color='r')
ax.legend()
ax.set_xlabel('Distance (x coordinate)')
ax.set_ylabel('Times diead (deaths)')


plt.title("Deaths committed to reach certain distances.")
plt.savefig("finalgraphs/Deaths commmitted to reach certain distances.")

plt.cla()


# score

ddqn_score_dict = {200: 0.0, 400: 300.0, 600: 300.0, 800: 400.0, 1000: 700.0, 1200: 400.0, 1400: 400.0, 1600: 400.0, 1800: 900.0, 2000: 800.0, 2200: 800.0, 2400: 800.0, 2600: 1200.0, 2800: 1500.0, 3000: 1500.0}

mcts_score_dict =  {200: 0, 400: 200, 600: 200, 800: 200, 1000: 300, 1200: 300, 1400: 400, 1600: 400, 1800: 800, 2000: 1000, 2200: 1000, 2400: 1000, 2600: 1000, 2800: 1100, 3000: 1100}



mcts_values = sorted(ddqn_score_dict.items())
ddqn_values = sorted(mcts_score_dict.items())

x1, y1 = zip(*mcts_values)
x2, y2 = zip(*ddqn_values)

x1 = np.array(x1)
y1 = np.array(y1)

x2 = np.array(x2)
y2 = np.array(y2)


fig, ax = plt.subplots()


ax.scatter(x1, y1, label='MCTS')
ax.scatter(x2, y2, label='DDQN', marker='s', color='r')
ax.legend()
ax.set_xlabel('Distance (x coordinate)')
ax.set_ylabel('Average score (points)')


plt.title("Average scores at certain distances.")
plt.savefig("finalgraphs/Average scores at certain distances.")

plt.cla()

# memory usage


ddqn = 430.28 # megabytes
mcts = 222.5 # megabytes

data = {"DDQN": 430.28, "MCTS": 222.5}

algorithms = list(data.keys())
mem_usage = list(data.values()  )

x = np.arange(2)
fig = plt.figure()


fig, ax = plt.subplots()
plt.bar(algorithms, mem_usage,  color = 'maroon')
plt.ylabel(" Memory usage (MB)")
plt.xlabel(" Algorithm ")
plt.title(" Memory usage by algorithm")

plt.savefig("finalgraphs/memory_usage")


# laptop speed for level complete

times = [1027.444876909256, 419.7998788356781, 2391.431916952133, 4022.487316131592]

time_avg = sum(times) / len(times)


#

death_poss = [(898, 79), (1410, 254), (1138, 255), (843, 79), (815, 79), (1140, 251), (296, 79), (1414, 255), (296, 79), (1140, 253), (687, 84), (898, 79), (849, 79), (296, 79), (861, 79), (670, 84), (1427, 251), (693, 79), (1948, 79), (1422, 253), (687, 84), (296, 79), (722, 79), (296, 79), (663, 79), (296, 79), (296, 79), (868, 84), (283, 84), (833, 79), (687, 79), (826, 84), (1411, 254), (1406, 253), (699, 79), (288, 79), (1128, 251), (661, 79), (694, 79), (1778, 84), (296, 79), (296, 79), (1415, 253), (1229, 143), (831, 79), (814, 79), (686, 84), (296, 79), (898, 79), (722, 79), (704, 79), (1406, 253), (1138, 254), (1138, 254), (722, 84), (722, 79), (698, 79), (296, 79), (710, 79), (296, 79), (898, 79), (898, 79), (696, 79), (868, 79), (670, 79), (296, 79), (1410, 255), (296, 79), (866, 79), (696, 79), (2031, 79), (296, 79), (1138, 253), (296, 79), (826, 79), (812, 79), (870, 79), (673, 79), (296, 79), (722, 84), (691, 79), (296, 79), (1138, 254), (296, 79), (1138, 254), (296, 79), (1138, 251), (682, 84), (296, 79), (898, 79), (296, 79), (296, 79), (296, 79), (854, 79), (722, 79), (684, 84), (722, 79), (696, 79), (290, 79), (805, 84), (705, 79), (898, 79), (1138, 255), (296, 79), (296, 79), (1660, 79), (682, 79), (700, 79), (850, 79), (296, 79), (296, 79), (1139, 254), (296, 79), (704, 79), (296, 79), (898, 79), (696, 79), (704, 79), (1427, 251), (1127, 255), (1409, 254), (296, 79), (1128, 251), (1128, 251), (702, 79), (722, 79), (691, 79), (675, 79), (1660, 84), (1222, 143), (1130, 255), (296, 79), (812, 84), (722, 79), (702, 79), (677, 79), (722, 79), (1414, 253), (1412, 255), (288, 79), (706, 79), (1410, 254), (672, 79), (702, 79), (678, 84), (835, 79), (1138, 254), (296, 79), (687, 79), (281, 79), (684, 79), (1138, 255), (296, 79), (675, 79), (704, 79), (296, 79), (722, 84), (283, 79), (296, 79), (1410, 254), (296, 79), (296, 79), (1414, 251), (296, 79), (1136, 255), (682, 79), (296, 79), (296, 79), (1660, 84), (1427, 251), (1410, 255), (668, 79), (691, 79), (677, 79), (677, 79), (1138, 254), (296, 79), (850, 79), (663, 79), (835, 79), (296, 79), (898, 79), (1513, 84), (296, 79), (687, 79), (296, 79), (286, 79), (288, 79), (296, 79), (1138, 255), (692, 79), (673, 79), (288, 84), (682, 79), (1138, 254), (722, 79), (898, 79), (1138, 254), (1133, 252), (296, 79), (873, 79), (1124, 255), (696, 79), (722, 79), (722, 84), (1410, 254), (296, 79), (1140, 253), (296, 79), (814, 79), (796, 79), (722, 79), (698, 79), (722, 79), (898, 79), (1410, 254), (296, 79), (1138, 254), (296, 79), (1137, 255), (800, 79), (1416, 255), (296, 79), (2008, 79), (684, 79), (722, 84), (296, 79), (1138, 254), (668, 79), (296, 79), (898, 79), (296, 79), (1138, 251), (1127, 255), (898, 84), (845, 79), (1415, 255), (296, 79), (296, 79), (1415, 255), (296, 79), (296, 79), (1124, 255), (686, 84), (898, 79), (689, 79), (1138, 254), (684, 79), (296, 79), (898, 79), (296, 79), (702, 79), (722, 79), (722, 79), (680, 84), (1127, 251), (794, 84), (722, 79), (704, 79), (1138, 255), (838, 79), (675, 79), (684, 79), (1137, 255), (296, 79), (722, 79), (1138, 255), (1135, 251), (281, 79), (296, 79), (296, 79), (1127, 254), (812, 79), (1140, 253), (696, 79), (824, 79), (864, 79), (1418, 255), (898, 79), (296, 79), (286, 79), (822, 79), (296, 79), (1140, 253), (722, 79), (898, 79), (296, 79), (296, 79), (801, 79), (1429, 251), (1427, 253), (296, 79), (691, 79), (1410, 255), (845, 79), (796, 79), (826, 79), (1133, 251), (722, 79), (296, 79), (296, 79), (1418, 253), (296, 79), (296, 79), (296, 79), (706, 79), (675, 79), (722, 79), (898, 79), (898, 79), (722, 84), (1138, 254), (288, 79), (898, 79), (722, 84), (1126, 251), (296, 79), (296, 79), (862, 79), (1415, 253), (722, 79), (687, 79), (817, 84), (296, 79), (677, 79), (693, 79), (722, 79), (296, 79), (706, 79), (702, 79), (691, 79), (288, 79), (296, 79), (1410, 254), (675, 79), (824, 79), (670, 79), (670, 79), (841, 84), (1130, 255), (296, 79), (296, 79), (682, 79), (290, 79), (296, 79), (845, 79), (845, 79), (834, 79), (296, 79), (296, 79), (722, 79), (820, 79), (3161, 121), (794, 79), (722, 79), (1138, 255), (704, 79), (1414, 255), (824, 79), (705, 79), (1135, 255), (680, 79), (1409, 255), (1138, 255), (672, 79), (668, 79), (283, 84), (691, 79), (1138, 255), (668, 79), (1409, 255), (698, 79), (296, 79), (698, 79), (296, 79), (296, 79), (672, 79), (687, 79), (1140, 253), (687, 79), (691, 79), (1229, 143), (801, 84), (684, 84), (694, 79), (1125, 255), (288, 79), (722, 79), (1137, 255), (798, 79), (898, 84), (296, 79), (691, 79), (1512, 84), (1138, 255), (898, 79), (898, 79), (1409, 254), (296, 79), (1411, 255), (863, 79), (1139, 255), (1138, 254), (682, 84), (296, 79), (680, 79), (673, 79), (691, 79), (281, 84), (1406, 253), (1135, 251), (702, 79), (1781, 79), (296, 79), (661, 79), (673, 84), (296, 79), (296, 79), (288, 79), (296, 79), (1138, 254), (670, 79), (1133, 253), (722, 79), (722, 84), (677, 79), (666, 79), (1128, 251), (1413, 255), (898, 79), (1138, 254), (687, 79), (696, 79), (296, 79), (1140, 253), (1135, 253), (691, 79), (296, 79), (898, 79), (296, 79), (296, 79), (290, 79), (898, 79), (817, 79), (722, 84), (296, 79), (675, 79), (1137, 255), (296, 79), (296, 79), (1406, 255), (696, 79), (673, 79), (722, 79), (722, 84), (1127, 251), (296, 79), (702, 79), (296, 79), (296, 79), (898, 79), (296, 79), (694, 84), (722, 79), (666, 79), (296, 79), (687, 79), (722, 79), (854, 79), (722, 79), (691, 79), (1126, 255), (1429, 253), (798, 79), (1127, 255), (702, 79), (722, 84), (1135, 251), (722, 79), (1140, 253), (296, 79), (296, 79), (1138, 255), (296, 79), (722, 79), (668, 79), (668, 79), (696, 79), (692, 79), (835, 84), (691, 79), (1138, 255), (694, 79), (706, 84), (296, 79), (673, 79), (296, 79), (689, 79), (286, 79), (296, 79), (722, 79), (702, 79), (702, 79), (898, 79), (805, 84), (296, 79), (838, 79), (898, 79), (1422, 251), (672, 79), (722, 79), (898, 79), (694, 79), (805, 84), (296, 79), (288, 84), (842, 79), (296, 79), (296, 79), (288, 79), (658, 79), (296, 79), (296, 79), (296, 79), (861, 79), (1420, 255), (296, 79), (296, 79), (296, 79), (1137, 255), (1138, 255), (1133, 251), (704, 79), (898, 79), (869, 79), (1138, 254), (670, 79), (1129, 251), (1127, 251), (1139, 255), (296, 79), (296, 79), (296, 79), (1138, 254), (722, 84), (693, 79), (288, 79), (296, 79), (296, 79), (296, 79), (296, 79), (1138, 255), (288, 79), (702, 79), (1138, 255), (296, 79), (1128, 253), (1133, 251), (1126, 255), (661, 79), (296, 79), (696, 79), (659, 79), (296, 79), (796, 84), (296, 79), (296, 79), (689, 79), (866, 79), (857, 79), (692, 79), (898, 79), (678, 84), (1138, 254), (668, 79), (1408, 251), (296, 79), (288, 79), (722, 79), (850, 79), (672, 79), (704, 79), (803, 79), (1138, 254), (1133, 255), (866, 79), (684, 79), (898, 79), (722, 79), (296, 79), (296, 79), (898, 79), (296, 79), (296, 79), (659, 84), (663, 79), (808, 79), (835, 79), (1138, 255), (861, 84), (722, 79), (1140, 253), (1660, 84), (283, 84), (1412, 255), (661, 79), (838, 79), (1410, 254), (1412, 255), (296, 79), (722, 84), (1126, 255), (898, 79), (898, 79), (866, 79), (857, 79), (296, 79), (898, 79), (296, 79), (296, 79), (689, 84), (675, 79), (722, 79), (699, 79), (1138, 255), (898, 79), (694, 79), (697, 84), (296, 79), (898, 79), (1138, 254), (1410, 255), (296, 79), (286, 79), (840, 84), (288, 79), (296, 79), (1418, 255), (296, 79), (696, 79), (699, 79), (1406, 255), (679, 84), (673, 79), (1264, 176), (666, 84), (702, 79), (722, 79), (1138, 255), (806, 84), (1138, 255), (845, 79), (1657, 84), (810, 84), (296, 79), (845, 79), (702, 79), (1411, 255), (696, 79), (296, 79), (898, 79), (296, 79), (691, 79), (883, 79), (898, 84), (898, 79), (1127, 251), (704, 79), (296, 79), (704, 84), (296, 79), (805, 79), (898, 79), (659, 79), (296, 79), (296, 79), (722, 79), (696, 79), (696, 84), (296, 79), (817, 79), (803, 79), (296, 79), (1127, 254), (898, 79), (687, 84), (296, 79), (288, 84), (296, 79), (1133, 253), (696, 79), (898, 79), (1410, 254), (1126, 255), (722, 84), (672, 84), (848, 79), (1124, 255), (1403, 251), (722, 79), (1127, 255), (296, 79), (1126, 253), (687, 79), (698, 79), (722, 79), (296, 79), (1124, 255), (791, 91), (1224, 143), (686, 84), (296, 79), (704, 84), (1126, 255), (722, 79), (296, 79), (722, 79), (1413, 255), (296, 79), (722, 79), (1138, 254), (722, 84), (682, 79), (693, 84), (296, 79), (1133, 253), (687, 79), (1404, 255), (296, 79), (863, 79), (1410, 255), (898, 79), (704, 79), (679, 79), (296, 79), (704, 84), (296, 79), (296, 79), (706, 79), (706, 79), (296, 79), (296, 79), (680, 79), (702, 79), (1126, 255), (288, 79), (668, 79), (1425, 255), (1943, 79), (722, 84), (698, 79), (722, 79), (682, 79), (296, 79), (283, 79), (296, 79), (296, 79), (1422, 255), (680, 79), (666, 79), (1138, 254), (1424, 252), (722, 84), (296, 79), (666, 84), (296, 79), (705, 79), (815, 79), (296, 79), (702, 79), (1413, 255), (296, 79), (2469, 253), (296, 79), (845, 84), (1127, 255), (1126, 252), (290, 79), (296, 79), (801, 79), (1410, 254), (296, 79), (1513, 79), (868, 79), (691, 79), (296, 79), (829, 84), (296, 79), (696, 79), (296, 79), (673, 84), (704, 79), (288, 84), (1422, 253), (702, 79), (696, 79), (722, 79), (704, 84), (898, 79), (1138, 255), (826, 79), (706, 79), (290, 79), (722, 79), (675, 79), (695, 79), (679, 79), (296, 79), (296, 79), (868, 79), (1138, 254), (1410, 254), (1415, 253), (671, 79), (1138, 255), (722, 79), (1138, 255), (722, 84), (698, 79), (290, 79), (296, 79), (288, 84), (288, 79), (687, 79), (722, 79), (1404, 255), (1404, 251), (687, 79), (296, 79), (290, 79), (675, 79), (698, 79), (288, 84), (1403, 252), (850, 79), (1138, 255), (296, 79), (296, 79), (1126, 255), (1125, 255), (722, 79), (687, 79), (296, 79), (1138, 255), (1425, 255), (296, 79), (692, 84), (873, 79), (684, 79), (1131, 251), (898, 79), (1127, 251), (1423, 251), (722, 79), (722, 79), (1138, 254), (794, 79), (677, 79), (1401, 251), (675, 79), (801, 79), (296, 79), (1138, 255), (672, 79), (296, 79), (1229, 143), (1410, 255), (286, 79), (1422, 255), (684, 79), (822, 79), (296, 79), (1222, 147), (1408, 253), (283, 79), (680, 79), (696, 79), (296, 79), (722, 79), (854, 79), (1138, 255), (722, 79), (1137, 251), (687, 79), (722, 79), (296, 79), (668, 79), (1410, 255), (1414, 253), (708, 79), (805, 79), (663, 79), (1414, 251), (290, 79), (1138, 254), (296, 79), (898, 79), (673, 84), (898, 79), (807, 79), (824, 79), (296, 79), (824, 79), (702, 79), (1138, 255), (1410, 254), (1125, 255), (698, 79), (1127, 255), (1138, 255), (1140, 251), (722, 79), (1404, 255), (296, 79), (1136, 251), (687, 79), (1418, 251), (696, 84), (1138, 254), (1138, 255), (722, 79), (296, 79), (296, 79), (1138, 254), (1532, 84), (1133, 255), (803, 79), (856, 79), (722, 79), (670, 79), (1408, 252), (820, 79), (296, 79), (704, 79), (885, 79), (1138, 254), (849, 79), (898, 84), (296, 79), (296, 79), (296, 79), (296, 79), (296, 79), (296, 79), (665, 84), (1414, 253), (696, 79), (1425, 255), (722, 79), (722, 79), (898, 79), (296, 79), (722, 79), (898, 79), (689, 79), (704, 79), (898, 84), (826, 79), (722, 79), (1140, 255), (850, 79), (824, 84), (722, 79), (671, 79), (296, 79), (704, 84), (1138, 255), (854, 79), (1138, 251), (1125, 251), (898, 84), (1138, 255), (856, 79), (1133, 255), (296, 79), (852, 79), (1135, 253), (296, 79), (722, 79), (1409, 255), (810, 79), (1138, 254), (1414, 253), (1416, 255), (812, 84), (1135, 251), (1409, 255), (1126, 251), (286, 79), (722, 79), (1138, 254), (296, 79), (704, 79), (296, 79), (1127, 255), (722, 84), (1411, 255), (1529, 91), (296, 79), (692, 79)]

plt.cla()

plt.figure(figsize=(20,5))

x =  [cell[0] for cell in death_poss]
y =  [cell[1] if cell[1] < 240 else 0 for cell in death_poss]

x = np.array(x)
y = np.array(y)

plt.ylim(0,256)
plt.scatter(x,y)
plt.ylim(0,None)

plt.title(" Deaths Heatmap")
plt.xlabel("Y position")
plt.ylabel("X position")
plt.show()
plt.savefig("ddqn_heatmap.png")
